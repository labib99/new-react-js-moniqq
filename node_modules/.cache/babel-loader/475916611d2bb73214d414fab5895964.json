{"ast":null,"code":"var _jsxFileName = \"/mnt/Data/Codes/moniqq-addons/mon-app-new/src/pages/Login/index.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { logoMoniqq } from '../../assets';\nimport { authApi } from '../../api';\nimport { useNavigate } from 'react-router-dom';\nimport { ClipLoader } from 'react-spinners';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Login = () => {\n  _s();\n\n  useEffect(() => {\n    document.title = \"MONIQQ - Login\";\n    startOnMount();\n  }, []);\n  const navigate = useNavigate();\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [errorMsg, setErrorMsg] = useState('');\n  const [loading, setLoading] = useState(false);\n  useEffect(() => {\n    setErrorMsg('');\n  }, [username, password]);\n\n  const startOnMount = async () => {\n    try {\n      setLoading(true);\n      const response = await authApi.whoami();\n      console.log(response.data);\n\n      if (response.data.role === \"admin\") {\n        return navigate(\"/dashboardadmin\");\n      } else if (response.data.role === \"isp\") {\n        return navigate(\"/dashboardisp\");\n      }\n    } catch (err) {\n      console.log(\"ERROR\");\n    }\n\n    setLoading(false);\n  };\n\n  const handleLogin = async e => {\n    e.preventDefault();\n\n    try {\n      setLoading(true);\n      const response = await authApi.login({\n        username,\n        password\n      });\n      console.log(response.data);\n\n      if (response.data.role === \"admin\") {\n        return navigate(\"/dashboardadmin\");\n      } else if (response.data.role === \"isp\") {\n        return navigate(\"/dashboardisp\");\n      }\n\n      setUsername('');\n      setPassword('');\n    } catch (err) {\n      console.log(err.response.data);\n      setErrorMsg(err.response.data);\n    }\n\n    setLoading(false);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex flex-col items-center justify-center bg-gray-50 h-screen dark:bg-gray-900 p-4\",\n    children: loading ? /*#__PURE__*/_jsxDEV(ClipLoader, {\n      color: \"#d2d2d2\",\n      loading: loading //cssOverride={override}\n      ,\n      size: 120,\n      \"aria-label\": \"Loading Spinner\",\n      \"data-testid\": \"loader\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \" w-full bg-white rounded-lg shadow dark:border md:mt-0 sm:max-w-md xl:p-0 dark:bg-gray-800 dark:border-gray-700\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \" flex flex-col items-center justify-center p-8 space-y-4 \",\n        children: [/*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"localhost:3000\",\n          className: \"flex items-center mb-6 text-2xl font-semibold text-gray-900 dark:text-white\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            className: \"h-5 mr-2\",\n            src: logoMoniqq,\n            alt: \"logo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n            className: \"text-center text-xl font-bold mb-2 leading-tight tracking-tight text-gray-900 md:text-2xl dark:text-white\",\n            children: \"Sign in\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-center text-xs font-light text-gray-500 dark:text-white\",\n            children: \"Khusus untuk Admin dan Penyedia Jasa Internet\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-center text-xs font-medium text-red-500 dark:text-red-500\",\n            children: errorMsg\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          className: \"w-full space-y-4 md:space-y-6\",\n          action: \"#\",\n          onSubmit: handleLogin,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"username\",\n              className: \"block mb-2 text-sm font-medium text-gray-900 dark:text-white\",\n              children: \"Username\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 104,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"username\",\n              name: \"username\",\n              id: \"username\",\n              className: \"bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500\",\n              placeholder: \"username\",\n              required: true,\n              autoComplete: \"off\",\n              value: username,\n              onChange: e => setUsername(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 109,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"password\",\n              className: \"block mb-2 text-sm font-medium text-gray-900 dark:text-white\",\n              children: \"Password\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 122,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"password\",\n              name: \"password\",\n              id: \"password\",\n              placeholder: \"\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\",\n              className: \"bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500\",\n              required: true,\n              value: password,\n              onChange: e => setPassword(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 127,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"w-full text-white bg-blue-600 hover:bg-primary-700 focus:ring-4 focus:outline-none focus:ring-primary-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-primary-600 dark:hover:bg-primary-700 dark:focus:ring-primary-800\",\n            children: \"Sign in\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Login, \"ZVRHMvI+pWJ56ZHCUjWGvyrBN8k=\", false, function () {\n  return [useNavigate];\n});\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useEffect","useState","logoMoniqq","authApi","useNavigate","ClipLoader","Login","document","title","startOnMount","navigate","username","setUsername","password","setPassword","errorMsg","setErrorMsg","loading","setLoading","response","whoami","console","log","data","role","err","handleLogin","e","preventDefault","login","target","value"],"sources":["/mnt/Data/Codes/moniqq-addons/mon-app-new/src/pages/Login/index.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { logoMoniqq } from '../../assets'\nimport { authApi } from '../../api'\nimport { useNavigate } from 'react-router-dom'\nimport { ClipLoader } from 'react-spinners'\n\nconst Login = () => {\n    useEffect(() => {\n        document.title = \"MONIQQ - Login\";\n        startOnMount()\n    }, []);\n\n    const navigate = useNavigate()\n    const [username, setUsername] = useState('')\n\tconst [password, setPassword] = useState('')\n    const [errorMsg, setErrorMsg] = useState('')\n    const [loading, setLoading] = useState(false)\n\n    useEffect(() => {\n        setErrorMsg('')\n    }, [username, password])\n\n    const startOnMount = async () => {\n        try {\n            setLoading(true)\n            const response = await authApi.whoami()\n            console.log(response.data)\n            if (response.data.role === \"admin\") {\n                return navigate(\"/dashboardadmin\")\n            } else if (response.data.role === \"isp\") {\n                return navigate(\"/dashboardisp\")\n            }\n        } catch (err) {\n            console.log(\"ERROR\")\n        }\n        setLoading(false)\n    }\n\n    const handleLogin = async (e) => {\n        e.preventDefault()\n        try {\n            setLoading(true)\n            const response = await authApi.login({ username, password })\n            console.log(response.data)\n            if (response.data.role === \"admin\") {\n                return navigate(\"/dashboardadmin\")\n            } else if (response.data.role === \"isp\") {\n                return navigate(\"/dashboardisp\")\n            }\n            setUsername('')\n            setPassword('')\n        } catch (err) {\n            console.log(err.response.data)\n            setErrorMsg(err.response.data)\n        }\n        setLoading(false)\n    }\n\n    return (\n        <div className=\"flex flex-col items-center justify-center bg-gray-50 h-screen dark:bg-gray-900 p-4\">\n            {\n                loading ?\n\n                <ClipLoader\n                color={\"#d2d2d2\"}\n                loading={loading}\n                //cssOverride={override}\n                size={120}\n                aria-label=\"Loading Spinner\"\n                data-testid=\"loader\"\n                />\n                \n                :\n            \n            <div\n                className=\" w-full bg-white rounded-lg shadow dark:border md:mt-0 sm:max-w-md xl:p-0 dark:bg-gray-800 dark:border-gray-700\"\n            >\n                <div className=\" flex flex-col items-center justify-center p-8 space-y-4 \">\n                    <a\n                        href=\"localhost:3000\"\n                        className=\"flex items-center mb-6 text-2xl font-semibold text-gray-900 dark:text-white\"\n                    >\n                        <img className=\"h-5 mr-2\" src={logoMoniqq} alt=\"logo\" />\n                    </a>\n                    <div>\n                        <h6\n                            className=\"text-center text-xl font-bold mb-2 leading-tight tracking-tight text-gray-900 md:text-2xl dark:text-white\"\n                        >\n                            Sign in\n                        </h6>\n                        <p\n                            className=\"text-center text-xs font-light text-gray-500 dark:text-white\"\n                        >\n                            Khusus untuk Admin dan Penyedia Jasa Internet\n                        </p>\n                        <p\n                            className=\"text-center text-xs font-medium text-red-500 dark:text-red-500\"\n                        >\n                            {errorMsg}\n                        </p>\n                    </div>\n                    <form className=\"w-full space-y-4 md:space-y-6\" action=\"#\" onSubmit={handleLogin}>\n                        <div>\n                            <label\n                                htmlFor=\"username\"\n                                className=\"block mb-2 text-sm font-medium text-gray-900 dark:text-white\"\n                            >Username</label\n                            >\n                            <input\n                                type=\"username\"\n                                name=\"username\"\n                                id=\"username\"\n                                className=\"bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500\"\n                                placeholder=\"username\"\n                                required\n                                autoComplete=\"off\"\n                                value={ username }\n                                onChange={ (e) => setUsername(e.target.value) }\n                            />\n                        </div>\n                        <div>\n                            <label\n                                htmlFor=\"password\"\n                                className=\"block mb-2 text-sm font-medium text-gray-900 dark:text-white\"\n                            >Password</label\n                            >\n                            <input\n                                type=\"password\"\n                                name=\"password\"\n                                id=\"password\"\n                                placeholder=\"••••••••\"\n                                className=\"bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500\"\n                                required\n                                value={ password }\n                                onChange={ (e) => setPassword(e.target.value) }\n                            />\n                        </div>\n\n                        <button\n                            type=\"submit\"\n                            className=\"w-full text-white bg-blue-600 hover:bg-primary-700 focus:ring-4 focus:outline-none focus:ring-primary-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-primary-600 dark:hover:bg-primary-700 dark:focus:ring-primary-800\"\n                        >\n                            Sign in\n                        </button>\n                    </form>\n                </div>\n            </div>\n            }\n        </div>\n    )\n}\n\nexport default Login"],"mappings":"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"},"metadata":{},"sourceType":"module"}